<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SQL Schema â€” Clinic Management Software â€” Module Graph</title>
  <style>
    :root { --panel-gap: 12px; }
    html,body { height:100%; margin:0; font-family: Inter, system-ui, Arial; background: linear-gradient(180deg,#f7fbf7,#ffffff); }
    .topbar { position: absolute; left:12px; right:12px; top:12px; display:flex; gap:8px; align-items:center; z-index:60; }
    .topbar .title { padding:8px 10px; background:rgba(255,255,255,0.98); border-radius:10px; font-weight:700; box-shadow:0 6px 20px rgba(2,6,12,0.06); }
    .controls { margin-left:auto; display:flex; gap:8px; align-items:center; }
    .btn { background:white; border:1px solid rgba(0,0,0,0.06); padding:6px 10px; border-radius:8px; cursor:pointer; }
    .search { padding:8px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.08); min-width:260px; }

    /* layout: cy on left, details on right */
    .workspace { position:absolute; inset:64px 12px 12px 12px; display:flex; gap:var(--panel-gap); }
    #cy { flex:1 1 auto; border-radius:12px; background: rgba(255,255,255,0.96); box-shadow: 0 12px 40px rgba(2,6,12,0.06); overflow:hidden; position:relative; transition: flex-basis 240ms ease; }
    #detail-panel { flex: 0 0 360px; width:360px; background: #fff; border-radius:12px; box-shadow: 0 12px 40px rgba(2,6,12,0.08); padding:14px; overflow:auto; transition: flex-basis 240ms ease, width 240ms ease, padding 200ms ease; }
    #detail-panel.closed { flex: 0 0 0; width: 0; padding: 0; overflow: hidden; }

    .detail-header { display:flex; gap:8px; align-items:center; }
    .detail-header h2 { margin:0; font-size:16px; }
    .badge { background:#eef7ee; color:#0b6b3a; padding:6px 8px; border-radius:8px; font-size:13px; }

    .section { margin-top:12px; }
    .section h4 { margin:0 0 8px 0; font-size:13px; }
    .list { display:flex; flex-direction:column; gap:6px; }
    .file-item { padding:8px; border-radius:8px; background:#f6fff6; cursor:pointer; }
    .code { font-family: monospace; background:#f3f7f3; padding:8px; border-radius:8px; overflow:auto; }

    .legend { position:absolute; left:18px; bottom:18px; background:rgba(255,255,255,0.95); padding:8px 12px; border-radius:8px; font-size:13px; z-index:35; }

    .logo-btn { background: transparent; border: none; font-size: 18px; display: inline-flex; align-items: center; justify-content: center; padding: 6px; border-radius:8px; cursor:pointer; }

    @media (max-width: 900px) {
      #detail-panel { display:none; }
    }
  </style>
</head>
<body>
  <div class="topbar" role="toolbar">
    <button id="toggle-detail" class="logo-btn" title="Toggle details">ðŸ“˜</button>
    <div class="title">SQL Schema â€” Clinic Management Software â€” Module Graph</div>
    <div class="controls">
      <input id="search" class="search" placeholder="Search modules, files, endpoints..." />
      <select id="layout" class="btn">
        <option value="breadthfirst">Hierarchical</option>
        <option value="cose">Force</option>
        <option value="concentric">Concentric</option>
        <option value="grid">Grid</option>
        <option value="circle">Circle</option>
      </select>
      <button class="btn" id="zoom-in">Zoom +</button>
      <button class="btn" id="zoom-out">Zoom âˆ’</button>
      <button class="btn" id="fit">Fit</button>
      <button class="btn" id="export-png">Export PNG</button>
    </div>
  </div>

  <div class="workspace">
    <div id="cy"></div>
    <aside id="detail-panel" aria-hidden="true">
      <div class="detail-header">
        <h2 id="detail-title">Select a node</h2>
        <div id="detail-badge" class="badge"> </div>
      </div>
      <div id="detail-summary" class="section"></div>
      <div id="detail-description" class="section"></div>
      <div id="detail-keypoints" class="section"></div>
      <div id="detail-important" class="section"></div>
      <div id="detail-api" class="section"></div>
      <div id="detail-files" class="section"></div>
      <div id="detail-meta" class="section"></div>
      <div style="margin-top:12px;text-align:right;"><button id="detail-close" class="btn">Close</button></div>
    </aside>
  </div>

  <div class="legend">Module = rounded node â€¢ File = document node â€¢ Summary = aggregated files (click to open)</div>

  <!-- Cytoscape from CDN -->
  <script src="https://unpkg.com/cytoscape@3.24.0/dist/cytoscape.min.js"></script>

  <script>
    const elements = [{"data":{"id":"table:clinics","label":"clinics","type":"table","targetId":"clinics","title":"clinics","description":"","meta":{},"columns_count":6}},{"data":{"id":"column:clinics.clinic_id","label":"clinic_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"clinics","columnName":"clinic_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"clinics.clinic_id"}},{"data":{"id":"table:clinics__hascol__column:clinics.clinic_id","source":"table:clinics","target":"column:clinics.clinic_id","label":"has-column"}},{"data":{"id":"column:clinics.name","label":"name : VARCHAR(255)","type":"column","parentTable":"clinics","columnName":"name","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"clinics.name"}},{"data":{"id":"table:clinics__hascol__column:clinics.name","source":"table:clinics","target":"column:clinics.name","label":"has-column"}},{"data":{"id":"column:clinics.address","label":"address : VARCHAR(255)","type":"column","parentTable":"clinics","columnName":"address","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"clinics.address"}},{"data":{"id":"table:clinics__hascol__column:clinics.address","source":"table:clinics","target":"column:clinics.address","label":"has-column"}},{"data":{"id":"column:clinics.phone","label":"phone : VARCHAR(20)","type":"column","parentTable":"clinics","columnName":"phone","columnType":"VARCHAR(20)","constraints":[],"description":"","targetId":"clinics.phone"}},{"data":{"id":"table:clinics__hascol__column:clinics.phone","source":"table:clinics","target":"column:clinics.phone","label":"has-column"}},{"data":{"id":"column:clinics.email","label":"email : VARCHAR(100)","type":"column","parentTable":"clinics","columnName":"email","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"clinics.email"}},{"data":{"id":"table:clinics__hascol__column:clinics.email","source":"table:clinics","target":"column:clinics.email","label":"has-column"}},{"data":{"id":"column:clinics.owner_id","label":"owner_id : INTEGER","type":"column","parentTable":"clinics","columnName":"owner_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"clinics.owner_id"}},{"data":{"id":"table:clinics__hascol__column:clinics.owner_id","source":"table:clinics","target":"column:clinics.owner_id","label":"has-column"}},{"data":{"id":"table:users","label":"users","type":"table","targetId":"users","title":"users","description":"","meta":{},"columns_count":8}},{"data":{"id":"column:users.user_id","label":"user_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"users","columnName":"user_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"users.user_id"}},{"data":{"id":"table:users__hascol__column:users.user_id","source":"table:users","target":"column:users.user_id","label":"has-column"}},{"data":{"id":"column:users.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"users","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"users.clinic_id"}},{"data":{"id":"table:users__hascol__column:users.clinic_id","source":"table:users","target":"column:users.clinic_id","label":"has-column"}},{"data":{"id":"column:users.role","label":"role : VARCHAR(50)","type":"column","parentTable":"users","columnName":"role","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"users.role"}},{"data":{"id":"table:users__hascol__column:users.role","source":"table:users","target":"column:users.role","label":"has-column"}},{"data":{"id":"column:users.name","label":"name : VARCHAR(100)","type":"column","parentTable":"users","columnName":"name","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"users.name"}},{"data":{"id":"table:users__hascol__column:users.name","source":"table:users","target":"column:users.name","label":"has-column"}},{"data":{"id":"column:users.email","label":"email : VARCHAR(100)","type":"column","parentTable":"users","columnName":"email","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"users.email"}},{"data":{"id":"table:users__hascol__column:users.email","source":"table:users","target":"column:users.email","label":"has-column"}},{"data":{"id":"column:users.phone","label":"phone : VARCHAR(20)","type":"column","parentTable":"users","columnName":"phone","columnType":"VARCHAR(20)","constraints":[],"description":"","targetId":"users.phone"}},{"data":{"id":"table:users__hascol__column:users.phone","source":"table:users","target":"column:users.phone","label":"has-column"}},{"data":{"id":"column:users.password_hash","label":"password_hash : VARCHAR(255)","type":"column","parentTable":"users","columnName":"password_hash","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"users.password_hash"}},{"data":{"id":"table:users__hascol__column:users.password_hash","source":"table:users","target":"column:users.password_hash","label":"has-column"}},{"data":{"id":"column:users.is_active","label":"is_active : BOOLEAN","type":"column","parentTable":"users","columnName":"is_active","columnType":"BOOLEAN","constraints":[],"description":"","targetId":"users.is_active"}},{"data":{"id":"table:users__hascol__column:users.is_active","source":"table:users","target":"column:users.is_active","label":"has-column"}},{"data":{"id":"table:patients","label":"patients","type":"table","targetId":"patients","title":"patients","description":"","meta":{},"columns_count":10}},{"data":{"id":"column:patients.patient_id","label":"patient_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"patients","columnName":"patient_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"patients.patient_id"}},{"data":{"id":"table:patients__hascol__column:patients.patient_id","source":"table:patients","target":"column:patients.patient_id","label":"has-column"}},{"data":{"id":"column:patients.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"patients","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"patients.clinic_id"}},{"data":{"id":"table:patients__hascol__column:patients.clinic_id","source":"table:patients","target":"column:patients.clinic_id","label":"has-column"}},{"data":{"id":"column:patients.name","label":"name : VARCHAR(100)","type":"column","parentTable":"patients","columnName":"name","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"patients.name"}},{"data":{"id":"table:patients__hascol__column:patients.name","source":"table:patients","target":"column:patients.name","label":"has-column"}},{"data":{"id":"column:patients.dob","label":"dob : DATE","type":"column","parentTable":"patients","columnName":"dob","columnType":"DATE","constraints":[],"description":"","targetId":"patients.dob"}},{"data":{"id":"table:patients__hascol__column:patients.dob","source":"table:patients","target":"column:patients.dob","label":"has-column"}},{"data":{"id":"column:patients.gender","label":"gender : VARCHAR(10)","type":"column","parentTable":"patients","columnName":"gender","columnType":"VARCHAR(10)","constraints":[],"description":"","targetId":"patients.gender"}},{"data":{"id":"table:patients__hascol__column:patients.gender","source":"table:patients","target":"column:patients.gender","label":"has-column"}},{"data":{"id":"column:patients.phone","label":"phone : VARCHAR(20)","type":"column","parentTable":"patients","columnName":"phone","columnType":"VARCHAR(20)","constraints":[],"description":"","targetId":"patients.phone"}},{"data":{"id":"table:patients__hascol__column:patients.phone","source":"table:patients","target":"column:patients.phone","label":"has-column"}},{"data":{"id":"column:patients.email","label":"email : VARCHAR(100)","type":"column","parentTable":"patients","columnName":"email","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"patients.email"}},{"data":{"id":"table:patients__hascol__column:patients.email","source":"table:patients","target":"column:patients.email","label":"has-column"}},{"data":{"id":"column:patients.address","label":"address : VARCHAR(255)","type":"column","parentTable":"patients","columnName":"address","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"patients.address"}},{"data":{"id":"table:patients__hascol__column:patients.address","source":"table:patients","target":"column:patients.address","label":"has-column"}},{"data":{"id":"column:patients.allergies","label":"allergies : TEXT","type":"column","parentTable":"patients","columnName":"allergies","columnType":"TEXT","constraints":[],"description":"","targetId":"patients.allergies"}},{"data":{"id":"table:patients__hascol__column:patients.allergies","source":"table:patients","target":"column:patients.allergies","label":"has-column"}},{"data":{"id":"column:patients.notes","label":"notes : TEXT","type":"column","parentTable":"patients","columnName":"notes","columnType":"TEXT","constraints":[],"description":"","targetId":"patients.notes"}},{"data":{"id":"table:patients__hascol__column:patients.notes","source":"table:patients","target":"column:patients.notes","label":"has-column"}},{"data":{"id":"table:appointments","label":"appointments","type":"table","targetId":"appointments","title":"appointments","description":"","meta":{},"columns_count":9}},{"data":{"id":"column:appointments.appointment_id","label":"appointment_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"appointments","columnName":"appointment_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"appointments.appointment_id"}},{"data":{"id":"table:appointments__hascol__column:appointments.appointment_id","source":"table:appointments","target":"column:appointments.appointment_id","label":"has-column"}},{"data":{"id":"column:appointments.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"appointments","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"appointments.clinic_id"}},{"data":{"id":"table:appointments__hascol__column:appointments.clinic_id","source":"table:appointments","target":"column:appointments.clinic_id","label":"has-column"}},{"data":{"id":"column:appointments.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"appointments","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"appointments.patient_id"}},{"data":{"id":"table:appointments__hascol__column:appointments.patient_id","source":"table:appointments","target":"column:appointments.patient_id","label":"has-column"}},{"data":{"id":"column:appointments.doctor_id","label":"doctor_id : INTEGER","type":"column","parentTable":"appointments","columnName":"doctor_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"appointments.doctor_id"}},{"data":{"id":"table:appointments__hascol__column:appointments.doctor_id","source":"table:appointments","target":"column:appointments.doctor_id","label":"has-column"}},{"data":{"id":"column:appointments.scheduled_time","label":"scheduled_time : DATETIME","type":"column","parentTable":"appointments","columnName":"scheduled_time","columnType":"DATETIME","constraints":[],"description":"","targetId":"appointments.scheduled_time"}},{"data":{"id":"table:appointments__hascol__column:appointments.scheduled_time","source":"table:appointments","target":"column:appointments.scheduled_time","label":"has-column"}},{"data":{"id":"column:appointments.status","label":"status : VARCHAR(50)","type":"column","parentTable":"appointments","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"appointments.status"}},{"data":{"id":"table:appointments__hascol__column:appointments.status","source":"table:appointments","target":"column:appointments.status","label":"has-column"}},{"data":{"id":"column:appointments.queue_token","label":"queue_token : INTEGER","type":"column","parentTable":"appointments","columnName":"queue_token","columnType":"INTEGER","constraints":[],"description":"","targetId":"appointments.queue_token"}},{"data":{"id":"table:appointments__hascol__column:appointments.queue_token","source":"table:appointments","target":"column:appointments.queue_token","label":"has-column"}},{"data":{"id":"column:appointments.is_online","label":"is_online : BOOLEAN","type":"column","parentTable":"appointments","columnName":"is_online","columnType":"BOOLEAN","constraints":[],"description":"","targetId":"appointments.is_online"}},{"data":{"id":"table:appointments__hascol__column:appointments.is_online","source":"table:appointments","target":"column:appointments.is_online","label":"has-column"}},{"data":{"id":"column:appointments.created_at","label":"created_at : DATETIME","type":"column","parentTable":"appointments","columnName":"created_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"appointments.created_at"}},{"data":{"id":"table:appointments__hascol__column:appointments.created_at","source":"table:appointments","target":"column:appointments.created_at","label":"has-column"}},{"data":{"id":"table:visit_notes","label":"visit_notes","type":"table","targetId":"visit_notes","title":"visit_notes","description":"","meta":{},"columns_count":8}},{"data":{"id":"column:visit_notes.note_id","label":"note_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"visit_notes","columnName":"note_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"visit_notes.note_id"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.note_id","source":"table:visit_notes","target":"column:visit_notes.note_id","label":"has-column"}},{"data":{"id":"column:visit_notes.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"visit_notes","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"visit_notes.appointment_id"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.appointment_id","source":"table:visit_notes","target":"column:visit_notes.appointment_id","label":"has-column"}},{"data":{"id":"column:visit_notes.doctor_id","label":"doctor_id : INTEGER","type":"column","parentTable":"visit_notes","columnName":"doctor_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"visit_notes.doctor_id"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.doctor_id","source":"table:visit_notes","target":"column:visit_notes.doctor_id","label":"has-column"}},{"data":{"id":"column:visit_notes.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"visit_notes","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"visit_notes.patient_id"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.patient_id","source":"table:visit_notes","target":"column:visit_notes.patient_id","label":"has-column"}},{"data":{"id":"column:visit_notes.visit_date","label":"visit_date : DATE","type":"column","parentTable":"visit_notes","columnName":"visit_date","columnType":"DATE","constraints":[],"description":"","targetId":"visit_notes.visit_date"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.visit_date","source":"table:visit_notes","target":"column:visit_notes.visit_date","label":"has-column"}},{"data":{"id":"column:visit_notes.notes","label":"notes : TEXT","type":"column","parentTable":"visit_notes","columnName":"notes","columnType":"TEXT","constraints":[],"description":"","targetId":"visit_notes.notes"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.notes","source":"table:visit_notes","target":"column:visit_notes.notes","label":"has-column"}},{"data":{"id":"column:visit_notes.vitals","label":"vitals : TEXT","type":"column","parentTable":"visit_notes","columnName":"vitals","columnType":"TEXT","constraints":[],"description":"","targetId":"visit_notes.vitals"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.vitals","source":"table:visit_notes","target":"column:visit_notes.vitals","label":"has-column"}},{"data":{"id":"column:visit_notes.lab_reports","label":"lab_reports : TEXT","type":"column","parentTable":"visit_notes","columnName":"lab_reports","columnType":"TEXT","constraints":[],"description":"","targetId":"visit_notes.lab_reports"}},{"data":{"id":"table:visit_notes__hascol__column:visit_notes.lab_reports","source":"table:visit_notes","target":"column:visit_notes.lab_reports","label":"has-column"}},{"data":{"id":"table:prescriptions","label":"prescriptions","type":"table","targetId":"prescriptions","title":"prescriptions","description":"","meta":{},"columns_count":8}},{"data":{"id":"column:prescriptions.prescription_id","label":"prescription_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"prescriptions","columnName":"prescription_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"prescriptions.prescription_id"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.prescription_id","source":"table:prescriptions","target":"column:prescriptions.prescription_id","label":"has-column"}},{"data":{"id":"column:prescriptions.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"prescriptions","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"prescriptions.appointment_id"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.appointment_id","source":"table:prescriptions","target":"column:prescriptions.appointment_id","label":"has-column"}},{"data":{"id":"column:prescriptions.doctor_id","label":"doctor_id : INTEGER","type":"column","parentTable":"prescriptions","columnName":"doctor_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"prescriptions.doctor_id"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.doctor_id","source":"table:prescriptions","target":"column:prescriptions.doctor_id","label":"has-column"}},{"data":{"id":"column:prescriptions.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"prescriptions","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"prescriptions.patient_id"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.patient_id","source":"table:prescriptions","target":"column:prescriptions.patient_id","label":"has-column"}},{"data":{"id":"column:prescriptions.date_issued","label":"date_issued : DATE","type":"column","parentTable":"prescriptions","columnName":"date_issued","columnType":"DATE","constraints":[],"description":"","targetId":"prescriptions.date_issued"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.date_issued","source":"table:prescriptions","target":"column:prescriptions.date_issued","label":"has-column"}},{"data":{"id":"column:prescriptions.content","label":"content : TEXT","type":"column","parentTable":"prescriptions","columnName":"content","columnType":"TEXT","constraints":[],"description":"","targetId":"prescriptions.content"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.content","source":"table:prescriptions","target":"column:prescriptions.content","label":"has-column"}},{"data":{"id":"column:prescriptions.language","label":"language : VARCHAR(50)","type":"column","parentTable":"prescriptions","columnName":"language","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"prescriptions.language"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.language","source":"table:prescriptions","target":"column:prescriptions.language","label":"has-column"}},{"data":{"id":"column:prescriptions.shared_via","label":"shared_via : VARCHAR(50)","type":"column","parentTable":"prescriptions","columnName":"shared_via","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"prescriptions.shared_via"}},{"data":{"id":"table:prescriptions__hascol__column:prescriptions.shared_via","source":"table:prescriptions","target":"column:prescriptions.shared_via","label":"has-column"}},{"data":{"id":"table:bills","label":"bills","type":"table","targetId":"bills","title":"bills","description":"","meta":{},"columns_count":9}},{"data":{"id":"column:bills.bill_id","label":"bill_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"bills","columnName":"bill_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"bills.bill_id"}},{"data":{"id":"table:bills__hascol__column:bills.bill_id","source":"table:bills","target":"column:bills.bill_id","label":"has-column"}},{"data":{"id":"column:bills.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"bills","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"bills.appointment_id"}},{"data":{"id":"table:bills__hascol__column:bills.appointment_id","source":"table:bills","target":"column:bills.appointment_id","label":"has-column"}},{"data":{"id":"column:bills.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"bills","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"bills.patient_id"}},{"data":{"id":"table:bills__hascol__column:bills.patient_id","source":"table:bills","target":"column:bills.patient_id","label":"has-column"}},{"data":{"id":"column:bills.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"bills","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"bills.clinic_id"}},{"data":{"id":"table:bills__hascol__column:bills.clinic_id","source":"table:bills","target":"column:bills.clinic_id","label":"has-column"}},{"data":{"id":"column:bills.amount","label":"amount : DECIMAL(10,2)","type":"column","parentTable":"bills","columnName":"amount","columnType":"DECIMAL(10,2)","constraints":[],"description":"","targetId":"bills.amount"}},{"data":{"id":"table:bills__hascol__column:bills.amount","source":"table:bills","target":"column:bills.amount","label":"has-column"}},{"data":{"id":"column:bills.discount","label":"discount : DECIMAL(10,2)","type":"column","parentTable":"bills","columnName":"discount","columnType":"DECIMAL(10,2)","constraints":[],"description":"","targetId":"bills.discount"}},{"data":{"id":"table:bills__hascol__column:bills.discount","source":"table:bills","target":"column:bills.discount","label":"has-column"}},{"data":{"id":"column:bills.payment_method","label":"payment_method : VARCHAR(50)","type":"column","parentTable":"bills","columnName":"payment_method","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"bills.payment_method"}},{"data":{"id":"table:bills__hascol__column:bills.payment_method","source":"table:bills","target":"column:bills.payment_method","label":"has-column"}},{"data":{"id":"column:bills.status","label":"status : VARCHAR(50)","type":"column","parentTable":"bills","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"bills.status"}},{"data":{"id":"table:bills__hascol__column:bills.status","source":"table:bills","target":"column:bills.status","label":"has-column"}},{"data":{"id":"column:bills.created_at","label":"created_at : DATETIME","type":"column","parentTable":"bills","columnName":"created_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"bills.created_at"}},{"data":{"id":"table:bills__hascol__column:bills.created_at","source":"table:bills","target":"column:bills.created_at","label":"has-column"}},{"data":{"id":"table:payments","label":"payments","type":"table","targetId":"payments","title":"payments","description":"","meta":{},"columns_count":6}},{"data":{"id":"column:payments.payment_id","label":"payment_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"payments","columnName":"payment_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"payments.payment_id"}},{"data":{"id":"table:payments__hascol__column:payments.payment_id","source":"table:payments","target":"column:payments.payment_id","label":"has-column"}},{"data":{"id":"column:payments.bill_id","label":"bill_id : INTEGER","type":"column","parentTable":"payments","columnName":"bill_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"payments.bill_id"}},{"data":{"id":"table:payments__hascol__column:payments.bill_id","source":"table:payments","target":"column:payments.bill_id","label":"has-column"}},{"data":{"id":"column:payments.amount_paid","label":"amount_paid : DECIMAL(10,2)","type":"column","parentTable":"payments","columnName":"amount_paid","columnType":"DECIMAL(10,2)","constraints":[],"description":"","targetId":"payments.amount_paid"}},{"data":{"id":"table:payments__hascol__column:payments.amount_paid","source":"table:payments","target":"column:payments.amount_paid","label":"has-column"}},{"data":{"id":"column:payments.payment_date","label":"payment_date : DATETIME","type":"column","parentTable":"payments","columnName":"payment_date","columnType":"DATETIME","constraints":[],"description":"","targetId":"payments.payment_date"}},{"data":{"id":"table:payments__hascol__column:payments.payment_date","source":"table:payments","target":"column:payments.payment_date","label":"has-column"}},{"data":{"id":"column:payments.payment_mode","label":"payment_mode : VARCHAR(50)","type":"column","parentTable":"payments","columnName":"payment_mode","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"payments.payment_mode"}},{"data":{"id":"table:payments__hascol__column:payments.payment_mode","source":"table:payments","target":"column:payments.payment_mode","label":"has-column"}},{"data":{"id":"column:payments.transaction_id","label":"transaction_id : VARCHAR(100)","type":"column","parentTable":"payments","columnName":"transaction_id","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"payments.transaction_id"}},{"data":{"id":"table:payments__hascol__column:payments.transaction_id","source":"table:payments","target":"column:payments.transaction_id","label":"has-column"}},{"data":{"id":"table:reminders","label":"reminders","type":"table","targetId":"reminders","title":"reminders","description":"","meta":{},"columns_count":8}},{"data":{"id":"column:reminders.reminder_id","label":"reminder_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"reminders","columnName":"reminder_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"reminders.reminder_id"}},{"data":{"id":"table:reminders__hascol__column:reminders.reminder_id","source":"table:reminders","target":"column:reminders.reminder_id","label":"has-column"}},{"data":{"id":"column:reminders.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"reminders","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"reminders.patient_id"}},{"data":{"id":"table:reminders__hascol__column:reminders.patient_id","source":"table:reminders","target":"column:reminders.patient_id","label":"has-column"}},{"data":{"id":"column:reminders.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"reminders","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"reminders.appointment_id"}},{"data":{"id":"table:reminders__hascol__column:reminders.appointment_id","source":"table:reminders","target":"column:reminders.appointment_id","label":"has-column"}},{"data":{"id":"column:reminders.type","label":"type : VARCHAR(50)","type":"column","parentTable":"reminders","columnName":"type","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"reminders.type"}},{"data":{"id":"table:reminders__hascol__column:reminders.type","source":"table:reminders","target":"column:reminders.type","label":"has-column"}},{"data":{"id":"column:reminders.message","label":"message : TEXT","type":"column","parentTable":"reminders","columnName":"message","columnType":"TEXT","constraints":[],"description":"","targetId":"reminders.message"}},{"data":{"id":"table:reminders__hascol__column:reminders.message","source":"table:reminders","target":"column:reminders.message","label":"has-column"}},{"data":{"id":"column:reminders.scheduled_time","label":"scheduled_time : DATETIME","type":"column","parentTable":"reminders","columnName":"scheduled_time","columnType":"DATETIME","constraints":[],"description":"","targetId":"reminders.scheduled_time"}},{"data":{"id":"table:reminders__hascol__column:reminders.scheduled_time","source":"table:reminders","target":"column:reminders.scheduled_time","label":"has-column"}},{"data":{"id":"column:reminders.sent_via","label":"sent_via : VARCHAR(50)","type":"column","parentTable":"reminders","columnName":"sent_via","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"reminders.sent_via"}},{"data":{"id":"table:reminders__hascol__column:reminders.sent_via","source":"table:reminders","target":"column:reminders.sent_via","label":"has-column"}},{"data":{"id":"column:reminders.status","label":"status : VARCHAR(50)","type":"column","parentTable":"reminders","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"reminders.status"}},{"data":{"id":"table:reminders__hascol__column:reminders.status","source":"table:reminders","target":"column:reminders.status","label":"has-column"}},{"data":{"id":"table:feedback","label":"feedback","type":"table","targetId":"feedback","title":"feedback","description":"","meta":{},"columns_count":7}},{"data":{"id":"column:feedback.feedback_id","label":"feedback_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"feedback","columnName":"feedback_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"feedback.feedback_id"}},{"data":{"id":"table:feedback__hascol__column:feedback.feedback_id","source":"table:feedback","target":"column:feedback.feedback_id","label":"has-column"}},{"data":{"id":"column:feedback.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"feedback","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"feedback.patient_id"}},{"data":{"id":"table:feedback__hascol__column:feedback.patient_id","source":"table:feedback","target":"column:feedback.patient_id","label":"has-column"}},{"data":{"id":"column:feedback.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"feedback","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"feedback.appointment_id"}},{"data":{"id":"table:feedback__hascol__column:feedback.appointment_id","source":"table:feedback","target":"column:feedback.appointment_id","label":"has-column"}},{"data":{"id":"column:feedback.doctor_id","label":"doctor_id : INTEGER","type":"column","parentTable":"feedback","columnName":"doctor_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"feedback.doctor_id"}},{"data":{"id":"table:feedback__hascol__column:feedback.doctor_id","source":"table:feedback","target":"column:feedback.doctor_id","label":"has-column"}},{"data":{"id":"column:feedback.rating","label":"rating : INTEGER","type":"column","parentTable":"feedback","columnName":"rating","columnType":"INTEGER","constraints":[],"description":"","targetId":"feedback.rating"}},{"data":{"id":"table:feedback__hascol__column:feedback.rating","source":"table:feedback","target":"column:feedback.rating","label":"has-column"}},{"data":{"id":"column:feedback.comments","label":"comments : TEXT","type":"column","parentTable":"feedback","columnName":"comments","columnType":"TEXT","constraints":[],"description":"","targetId":"feedback.comments"}},{"data":{"id":"table:feedback__hascol__column:feedback.comments","source":"table:feedback","target":"column:feedback.comments","label":"has-column"}},{"data":{"id":"column:feedback.created_at","label":"created_at : DATETIME","type":"column","parentTable":"feedback","columnName":"created_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"feedback.created_at"}},{"data":{"id":"table:feedback__hascol__column:feedback.created_at","source":"table:feedback","target":"column:feedback.created_at","label":"has-column"}},{"data":{"id":"table:reports","label":"reports","type":"table","targetId":"reports","title":"reports","description":"","meta":{},"columns_count":7}},{"data":{"id":"column:reports.report_id","label":"report_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"reports","columnName":"report_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"reports.report_id"}},{"data":{"id":"table:reports__hascol__column:reports.report_id","source":"table:reports","target":"column:reports.report_id","label":"has-column"}},{"data":{"id":"column:reports.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"reports","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"reports.clinic_id"}},{"data":{"id":"table:reports__hascol__column:reports.clinic_id","source":"table:reports","target":"column:reports.clinic_id","label":"has-column"}},{"data":{"id":"column:reports.type","label":"type : VARCHAR(50)","type":"column","parentTable":"reports","columnName":"type","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"reports.type"}},{"data":{"id":"table:reports__hascol__column:reports.type","source":"table:reports","target":"column:reports.type","label":"has-column"}},{"data":{"id":"column:reports.period_start","label":"period_start : DATE","type":"column","parentTable":"reports","columnName":"period_start","columnType":"DATE","constraints":[],"description":"","targetId":"reports.period_start"}},{"data":{"id":"table:reports__hascol__column:reports.period_start","source":"table:reports","target":"column:reports.period_start","label":"has-column"}},{"data":{"id":"column:reports.period_end","label":"period_end : DATE","type":"column","parentTable":"reports","columnName":"period_end","columnType":"DATE","constraints":[],"description":"","targetId":"reports.period_end"}},{"data":{"id":"table:reports__hascol__column:reports.period_end","source":"table:reports","target":"column:reports.period_end","label":"has-column"}},{"data":{"id":"column:reports.data","label":"data : TEXT","type":"column","parentTable":"reports","columnName":"data","columnType":"TEXT","constraints":[],"description":"","targetId":"reports.data"}},{"data":{"id":"table:reports__hascol__column:reports.data","source":"table:reports","target":"column:reports.data","label":"has-column"}},{"data":{"id":"column:reports.generated_at","label":"generated_at : DATETIME","type":"column","parentTable":"reports","columnName":"generated_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"reports.generated_at"}},{"data":{"id":"table:reports__hascol__column:reports.generated_at","source":"table:reports","target":"column:reports.generated_at","label":"has-column"}},{"data":{"id":"table:teleconsultations","label":"teleconsultations","type":"table","targetId":"teleconsultations","title":"teleconsultations","description":"","meta":{},"columns_count":8}},{"data":{"id":"column:teleconsultations.teleconsultation_id","label":"teleconsultation_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"teleconsultations","columnName":"teleconsultation_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"teleconsultations.teleconsultation_id"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.teleconsultation_id","source":"table:teleconsultations","target":"column:teleconsultations.teleconsultation_id","label":"has-column"}},{"data":{"id":"column:teleconsultations.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"teleconsultations","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"teleconsultations.appointment_id"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.appointment_id","source":"table:teleconsultations","target":"column:teleconsultations.appointment_id","label":"has-column"}},{"data":{"id":"column:teleconsultations.doctor_id","label":"doctor_id : INTEGER","type":"column","parentTable":"teleconsultations","columnName":"doctor_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"teleconsultations.doctor_id"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.doctor_id","source":"table:teleconsultations","target":"column:teleconsultations.doctor_id","label":"has-column"}},{"data":{"id":"column:teleconsultations.patient_id","label":"patient_id : INTEGER","type":"column","parentTable":"teleconsultations","columnName":"patient_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"teleconsultations.patient_id"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.patient_id","source":"table:teleconsultations","target":"column:teleconsultations.patient_id","label":"has-column"}},{"data":{"id":"column:teleconsultations.video_link","label":"video_link : VARCHAR(255)","type":"column","parentTable":"teleconsultations","columnName":"video_link","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"teleconsultations.video_link"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.video_link","source":"table:teleconsultations","target":"column:teleconsultations.video_link","label":"has-column"}},{"data":{"id":"column:teleconsultations.status","label":"status : VARCHAR(50)","type":"column","parentTable":"teleconsultations","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"teleconsultations.status"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.status","source":"table:teleconsultations","target":"column:teleconsultations.status","label":"has-column"}},{"data":{"id":"column:teleconsultations.started_at","label":"started_at : DATETIME","type":"column","parentTable":"teleconsultations","columnName":"started_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"teleconsultations.started_at"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.started_at","source":"table:teleconsultations","target":"column:teleconsultations.started_at","label":"has-column"}},{"data":{"id":"column:teleconsultations.ended_at","label":"ended_at : DATETIME","type":"column","parentTable":"teleconsultations","columnName":"ended_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"teleconsultations.ended_at"}},{"data":{"id":"table:teleconsultations__hascol__column:teleconsultations.ended_at","source":"table:teleconsultations","target":"column:teleconsultations.ended_at","label":"has-column"}},{"data":{"id":"table:ai_features","label":"ai_features","type":"table","targetId":"ai_features","title":"ai_features","description":"","meta":{},"columns_count":5}},{"data":{"id":"column:ai_features.ai_feature_id","label":"ai_feature_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"ai_features","columnName":"ai_feature_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"ai_features.ai_feature_id"}},{"data":{"id":"table:ai_features__hascol__column:ai_features.ai_feature_id","source":"table:ai_features","target":"column:ai_features.ai_feature_id","label":"has-column"}},{"data":{"id":"column:ai_features.appointment_id","label":"appointment_id : INTEGER","type":"column","parentTable":"ai_features","columnName":"appointment_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"ai_features.appointment_id"}},{"data":{"id":"table:ai_features__hascol__column:ai_features.appointment_id","source":"table:ai_features","target":"column:ai_features.appointment_id","label":"has-column"}},{"data":{"id":"column:ai_features.feature_type","label":"feature_type : VARCHAR(50)","type":"column","parentTable":"ai_features","columnName":"feature_type","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"ai_features.feature_type"}},{"data":{"id":"table:ai_features__hascol__column:ai_features.feature_type","source":"table:ai_features","target":"column:ai_features.feature_type","label":"has-column"}},{"data":{"id":"column:ai_features.result","label":"result : TEXT","type":"column","parentTable":"ai_features","columnName":"result","columnType":"TEXT","constraints":[],"description":"","targetId":"ai_features.result"}},{"data":{"id":"table:ai_features__hascol__column:ai_features.result","source":"table:ai_features","target":"column:ai_features.result","label":"has-column"}},{"data":{"id":"column:ai_features.created_at","label":"created_at : DATETIME","type":"column","parentTable":"ai_features","columnName":"created_at","columnType":"DATETIME","constraints":[],"description":"","targetId":"ai_features.created_at"}},{"data":{"id":"table:ai_features__hascol__column:ai_features.created_at","source":"table:ai_features","target":"column:ai_features.created_at","label":"has-column"}},{"data":{"id":"table:subscriptions","label":"subscriptions","type":"table","targetId":"subscriptions","title":"subscriptions","description":"","meta":{},"columns_count":6}},{"data":{"id":"column:subscriptions.subscription_id","label":"subscription_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"subscriptions","columnName":"subscription_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"subscriptions.subscription_id"}},{"data":{"id":"table:subscriptions__hascol__column:subscriptions.subscription_id","source":"table:subscriptions","target":"column:subscriptions.subscription_id","label":"has-column"}},{"data":{"id":"column:subscriptions.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"subscriptions","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"subscriptions.clinic_id"}},{"data":{"id":"table:subscriptions__hascol__column:subscriptions.clinic_id","source":"table:subscriptions","target":"column:subscriptions.clinic_id","label":"has-column"}},{"data":{"id":"column:subscriptions.plan","label":"plan : VARCHAR(50)","type":"column","parentTable":"subscriptions","columnName":"plan","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"subscriptions.plan"}},{"data":{"id":"table:subscriptions__hascol__column:subscriptions.plan","source":"table:subscriptions","target":"column:subscriptions.plan","label":"has-column"}},{"data":{"id":"column:subscriptions.start_date","label":"start_date : DATE","type":"column","parentTable":"subscriptions","columnName":"start_date","columnType":"DATE","constraints":[],"description":"","targetId":"subscriptions.start_date"}},{"data":{"id":"table:subscriptions__hascol__column:subscriptions.start_date","source":"table:subscriptions","target":"column:subscriptions.start_date","label":"has-column"}},{"data":{"id":"column:subscriptions.end_date","label":"end_date : DATE","type":"column","parentTable":"subscriptions","columnName":"end_date","columnType":"DATE","constraints":[],"description":"","targetId":"subscriptions.end_date"}},{"data":{"id":"table:subscriptions__hascol__column:subscriptions.end_date","source":"table:subscriptions","target":"column:subscriptions.end_date","label":"has-column"}},{"data":{"id":"column:subscriptions.status","label":"status : VARCHAR(50)","type":"column","parentTable":"subscriptions","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"subscriptions.status"}},{"data":{"id":"table:subscriptions__hascol__column:subscriptions.status","source":"table:subscriptions","target":"column:subscriptions.status","label":"has-column"}},{"data":{"id":"table:pharmacy_integration","label":"pharmacy_integration","type":"table","targetId":"pharmacy_integration","title":"pharmacy_integration","description":"","meta":{},"columns_count":5}},{"data":{"id":"column:pharmacy_integration.integration_id","label":"integration_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"pharmacy_integration","columnName":"integration_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"pharmacy_integration.integration_id"}},{"data":{"id":"table:pharmacy_integration__hascol__column:pharmacy_integration.integration_id","source":"table:pharmacy_integration","target":"column:pharmacy_integration.integration_id","label":"has-column"}},{"data":{"id":"column:pharmacy_integration.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"pharmacy_integration","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"pharmacy_integration.clinic_id"}},{"data":{"id":"table:pharmacy_integration__hascol__column:pharmacy_integration.clinic_id","source":"table:pharmacy_integration","target":"column:pharmacy_integration.clinic_id","label":"has-column"}},{"data":{"id":"column:pharmacy_integration.pharmacy_name","label":"pharmacy_name : VARCHAR(100)","type":"column","parentTable":"pharmacy_integration","columnName":"pharmacy_name","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"pharmacy_integration.pharmacy_name"}},{"data":{"id":"table:pharmacy_integration__hascol__column:pharmacy_integration.pharmacy_name","source":"table:pharmacy_integration","target":"column:pharmacy_integration.pharmacy_name","label":"has-column"}},{"data":{"id":"column:pharmacy_integration.api_key","label":"api_key : VARCHAR(255)","type":"column","parentTable":"pharmacy_integration","columnName":"api_key","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"pharmacy_integration.api_key"}},{"data":{"id":"table:pharmacy_integration__hascol__column:pharmacy_integration.api_key","source":"table:pharmacy_integration","target":"column:pharmacy_integration.api_key","label":"has-column"}},{"data":{"id":"column:pharmacy_integration.status","label":"status : VARCHAR(50)","type":"column","parentTable":"pharmacy_integration","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"pharmacy_integration.status"}},{"data":{"id":"table:pharmacy_integration__hascol__column:pharmacy_integration.status","source":"table:pharmacy_integration","target":"column:pharmacy_integration.status","label":"has-column"}},{"data":{"id":"table:lab_integration","label":"lab_integration","type":"table","targetId":"lab_integration","title":"lab_integration","description":"","meta":{},"columns_count":5}},{"data":{"id":"column:lab_integration.integration_id","label":"integration_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"lab_integration","columnName":"integration_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"lab_integration.integration_id"}},{"data":{"id":"table:lab_integration__hascol__column:lab_integration.integration_id","source":"table:lab_integration","target":"column:lab_integration.integration_id","label":"has-column"}},{"data":{"id":"column:lab_integration.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"lab_integration","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"lab_integration.clinic_id"}},{"data":{"id":"table:lab_integration__hascol__column:lab_integration.clinic_id","source":"table:lab_integration","target":"column:lab_integration.clinic_id","label":"has-column"}},{"data":{"id":"column:lab_integration.lab_name","label":"lab_name : VARCHAR(100)","type":"column","parentTable":"lab_integration","columnName":"lab_name","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"lab_integration.lab_name"}},{"data":{"id":"table:lab_integration__hascol__column:lab_integration.lab_name","source":"table:lab_integration","target":"column:lab_integration.lab_name","label":"has-column"}},{"data":{"id":"column:lab_integration.api_key","label":"api_key : VARCHAR(255)","type":"column","parentTable":"lab_integration","columnName":"api_key","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"lab_integration.api_key"}},{"data":{"id":"table:lab_integration__hascol__column:lab_integration.api_key","source":"table:lab_integration","target":"column:lab_integration.api_key","label":"has-column"}},{"data":{"id":"column:lab_integration.status","label":"status : VARCHAR(50)","type":"column","parentTable":"lab_integration","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"lab_integration.status"}},{"data":{"id":"table:lab_integration__hascol__column:lab_integration.status","source":"table:lab_integration","target":"column:lab_integration.status","label":"has-column"}},{"data":{"id":"table:ads","label":"ads","type":"table","targetId":"ads","title":"ads","description":"","meta":{},"columns_count":7}},{"data":{"id":"column:ads.ad_id","label":"ad_id : INTEGER PRIMARY KEY AUTOINCREMENT","type":"column","parentTable":"ads","columnName":"ad_id","columnType":"INTEGER PRIMARY KEY AUTOINCREMENT","constraints":[],"description":"","targetId":"ads.ad_id"}},{"data":{"id":"table:ads__hascol__column:ads.ad_id","source":"table:ads","target":"column:ads.ad_id","label":"has-column"}},{"data":{"id":"column:ads.clinic_id","label":"clinic_id : INTEGER","type":"column","parentTable":"ads","columnName":"clinic_id","columnType":"INTEGER","constraints":[],"description":"","targetId":"ads.clinic_id"}},{"data":{"id":"table:ads__hascol__column:ads.clinic_id","source":"table:ads","target":"column:ads.clinic_id","label":"has-column"}},{"data":{"id":"column:ads.sponsor","label":"sponsor : VARCHAR(100)","type":"column","parentTable":"ads","columnName":"sponsor","columnType":"VARCHAR(100)","constraints":[],"description":"","targetId":"ads.sponsor"}},{"data":{"id":"table:ads__hascol__column:ads.sponsor","source":"table:ads","target":"column:ads.sponsor","label":"has-column"}},{"data":{"id":"column:ads.banner_url","label":"banner_url : VARCHAR(255)","type":"column","parentTable":"ads","columnName":"banner_url","columnType":"VARCHAR(255)","constraints":[],"description":"","targetId":"ads.banner_url"}},{"data":{"id":"table:ads__hascol__column:ads.banner_url","source":"table:ads","target":"column:ads.banner_url","label":"has-column"}},{"data":{"id":"column:ads.start_date","label":"start_date : DATE","type":"column","parentTable":"ads","columnName":"start_date","columnType":"DATE","constraints":[],"description":"","targetId":"ads.start_date"}},{"data":{"id":"table:ads__hascol__column:ads.start_date","source":"table:ads","target":"column:ads.start_date","label":"has-column"}},{"data":{"id":"column:ads.end_date","label":"end_date : DATE","type":"column","parentTable":"ads","columnName":"end_date","columnType":"DATE","constraints":[],"description":"","targetId":"ads.end_date"}},{"data":{"id":"table:ads__hascol__column:ads.end_date","source":"table:ads","target":"column:ads.end_date","label":"has-column"}},{"data":{"id":"column:ads.status","label":"status : VARCHAR(50)","type":"column","parentTable":"ads","columnName":"status","columnType":"VARCHAR(50)","constraints":[],"description":"","targetId":"ads.status"}},{"data":{"id":"table:ads__hascol__column:ads.status","source":"table:ads","target":"column:ads.status","label":"has-column"}},{"data":{"id":"table:clinics--tree--column:clinics.clinic_id--has-column","source":"table:clinics","target":"column:clinics.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:clinics--tree--column:clinics.name--has-column","source":"table:clinics","target":"column:clinics.name","label":"has-column","meta":{}}},{"data":{"id":"table:clinics--tree--column:clinics.address--has-column","source":"table:clinics","target":"column:clinics.address","label":"has-column","meta":{}}},{"data":{"id":"table:clinics--tree--column:clinics.phone--has-column","source":"table:clinics","target":"column:clinics.phone","label":"has-column","meta":{}}},{"data":{"id":"table:clinics--tree--column:clinics.email--has-column","source":"table:clinics","target":"column:clinics.email","label":"has-column","meta":{}}},{"data":{"id":"table:clinics--tree--column:clinics.owner_id--has-column","source":"table:clinics","target":"column:clinics.owner_id","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.user_id--has-column","source":"table:users","target":"column:users.user_id","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.clinic_id--has-column","source":"table:users","target":"column:users.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.role--has-column","source":"table:users","target":"column:users.role","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.name--has-column","source":"table:users","target":"column:users.name","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.email--has-column","source":"table:users","target":"column:users.email","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.phone--has-column","source":"table:users","target":"column:users.phone","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.password_hash--has-column","source":"table:users","target":"column:users.password_hash","label":"has-column","meta":{}}},{"data":{"id":"table:users--tree--column:users.is_active--has-column","source":"table:users","target":"column:users.is_active","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.patient_id--has-column","source":"table:patients","target":"column:patients.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.clinic_id--has-column","source":"table:patients","target":"column:patients.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.name--has-column","source":"table:patients","target":"column:patients.name","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.dob--has-column","source":"table:patients","target":"column:patients.dob","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.gender--has-column","source":"table:patients","target":"column:patients.gender","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.phone--has-column","source":"table:patients","target":"column:patients.phone","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.email--has-column","source":"table:patients","target":"column:patients.email","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.address--has-column","source":"table:patients","target":"column:patients.address","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.allergies--has-column","source":"table:patients","target":"column:patients.allergies","label":"has-column","meta":{}}},{"data":{"id":"table:patients--tree--column:patients.notes--has-column","source":"table:patients","target":"column:patients.notes","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.appointment_id--has-column","source":"table:appointments","target":"column:appointments.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.clinic_id--has-column","source":"table:appointments","target":"column:appointments.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.patient_id--has-column","source":"table:appointments","target":"column:appointments.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.doctor_id--has-column","source":"table:appointments","target":"column:appointments.doctor_id","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.scheduled_time--has-column","source":"table:appointments","target":"column:appointments.scheduled_time","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.status--has-column","source":"table:appointments","target":"column:appointments.status","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.queue_token--has-column","source":"table:appointments","target":"column:appointments.queue_token","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.is_online--has-column","source":"table:appointments","target":"column:appointments.is_online","label":"has-column","meta":{}}},{"data":{"id":"table:appointments--tree--column:appointments.created_at--has-column","source":"table:appointments","target":"column:appointments.created_at","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.note_id--has-column","source":"table:visit_notes","target":"column:visit_notes.note_id","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.appointment_id--has-column","source":"table:visit_notes","target":"column:visit_notes.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.doctor_id--has-column","source":"table:visit_notes","target":"column:visit_notes.doctor_id","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.patient_id--has-column","source":"table:visit_notes","target":"column:visit_notes.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.visit_date--has-column","source":"table:visit_notes","target":"column:visit_notes.visit_date","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.notes--has-column","source":"table:visit_notes","target":"column:visit_notes.notes","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.vitals--has-column","source":"table:visit_notes","target":"column:visit_notes.vitals","label":"has-column","meta":{}}},{"data":{"id":"table:visit_notes--tree--column:visit_notes.lab_reports--has-column","source":"table:visit_notes","target":"column:visit_notes.lab_reports","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.prescription_id--has-column","source":"table:prescriptions","target":"column:prescriptions.prescription_id","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.appointment_id--has-column","source":"table:prescriptions","target":"column:prescriptions.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.doctor_id--has-column","source":"table:prescriptions","target":"column:prescriptions.doctor_id","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.patient_id--has-column","source":"table:prescriptions","target":"column:prescriptions.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.date_issued--has-column","source":"table:prescriptions","target":"column:prescriptions.date_issued","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.content--has-column","source":"table:prescriptions","target":"column:prescriptions.content","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.language--has-column","source":"table:prescriptions","target":"column:prescriptions.language","label":"has-column","meta":{}}},{"data":{"id":"table:prescriptions--tree--column:prescriptions.shared_via--has-column","source":"table:prescriptions","target":"column:prescriptions.shared_via","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.bill_id--has-column","source":"table:bills","target":"column:bills.bill_id","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.appointment_id--has-column","source":"table:bills","target":"column:bills.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.patient_id--has-column","source":"table:bills","target":"column:bills.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.clinic_id--has-column","source":"table:bills","target":"column:bills.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.amount--has-column","source":"table:bills","target":"column:bills.amount","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.discount--has-column","source":"table:bills","target":"column:bills.discount","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.payment_method--has-column","source":"table:bills","target":"column:bills.payment_method","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.status--has-column","source":"table:bills","target":"column:bills.status","label":"has-column","meta":{}}},{"data":{"id":"table:bills--tree--column:bills.created_at--has-column","source":"table:bills","target":"column:bills.created_at","label":"has-column","meta":{}}},{"data":{"id":"table:payments--tree--column:payments.payment_id--has-column","source":"table:payments","target":"column:payments.payment_id","label":"has-column","meta":{}}},{"data":{"id":"table:payments--tree--column:payments.bill_id--has-column","source":"table:payments","target":"column:payments.bill_id","label":"has-column","meta":{}}},{"data":{"id":"table:payments--tree--column:payments.amount_paid--has-column","source":"table:payments","target":"column:payments.amount_paid","label":"has-column","meta":{}}},{"data":{"id":"table:payments--tree--column:payments.payment_date--has-column","source":"table:payments","target":"column:payments.payment_date","label":"has-column","meta":{}}},{"data":{"id":"table:payments--tree--column:payments.payment_mode--has-column","source":"table:payments","target":"column:payments.payment_mode","label":"has-column","meta":{}}},{"data":{"id":"table:payments--tree--column:payments.transaction_id--has-column","source":"table:payments","target":"column:payments.transaction_id","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.reminder_id--has-column","source":"table:reminders","target":"column:reminders.reminder_id","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.patient_id--has-column","source":"table:reminders","target":"column:reminders.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.appointment_id--has-column","source":"table:reminders","target":"column:reminders.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.type--has-column","source":"table:reminders","target":"column:reminders.type","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.message--has-column","source":"table:reminders","target":"column:reminders.message","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.scheduled_time--has-column","source":"table:reminders","target":"column:reminders.scheduled_time","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.sent_via--has-column","source":"table:reminders","target":"column:reminders.sent_via","label":"has-column","meta":{}}},{"data":{"id":"table:reminders--tree--column:reminders.status--has-column","source":"table:reminders","target":"column:reminders.status","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.feedback_id--has-column","source":"table:feedback","target":"column:feedback.feedback_id","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.patient_id--has-column","source":"table:feedback","target":"column:feedback.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.appointment_id--has-column","source":"table:feedback","target":"column:feedback.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.doctor_id--has-column","source":"table:feedback","target":"column:feedback.doctor_id","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.rating--has-column","source":"table:feedback","target":"column:feedback.rating","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.comments--has-column","source":"table:feedback","target":"column:feedback.comments","label":"has-column","meta":{}}},{"data":{"id":"table:feedback--tree--column:feedback.created_at--has-column","source":"table:feedback","target":"column:feedback.created_at","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.report_id--has-column","source":"table:reports","target":"column:reports.report_id","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.clinic_id--has-column","source":"table:reports","target":"column:reports.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.type--has-column","source":"table:reports","target":"column:reports.type","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.period_start--has-column","source":"table:reports","target":"column:reports.period_start","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.period_end--has-column","source":"table:reports","target":"column:reports.period_end","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.data--has-column","source":"table:reports","target":"column:reports.data","label":"has-column","meta":{}}},{"data":{"id":"table:reports--tree--column:reports.generated_at--has-column","source":"table:reports","target":"column:reports.generated_at","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.teleconsultation_id--has-column","source":"table:teleconsultations","target":"column:teleconsultations.teleconsultation_id","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.appointment_id--has-column","source":"table:teleconsultations","target":"column:teleconsultations.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.doctor_id--has-column","source":"table:teleconsultations","target":"column:teleconsultations.doctor_id","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.patient_id--has-column","source":"table:teleconsultations","target":"column:teleconsultations.patient_id","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.video_link--has-column","source":"table:teleconsultations","target":"column:teleconsultations.video_link","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.status--has-column","source":"table:teleconsultations","target":"column:teleconsultations.status","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.started_at--has-column","source":"table:teleconsultations","target":"column:teleconsultations.started_at","label":"has-column","meta":{}}},{"data":{"id":"table:teleconsultations--tree--column:teleconsultations.ended_at--has-column","source":"table:teleconsultations","target":"column:teleconsultations.ended_at","label":"has-column","meta":{}}},{"data":{"id":"table:ai_features--tree--column:ai_features.ai_feature_id--has-column","source":"table:ai_features","target":"column:ai_features.ai_feature_id","label":"has-column","meta":{}}},{"data":{"id":"table:ai_features--tree--column:ai_features.appointment_id--has-column","source":"table:ai_features","target":"column:ai_features.appointment_id","label":"has-column","meta":{}}},{"data":{"id":"table:ai_features--tree--column:ai_features.feature_type--has-column","source":"table:ai_features","target":"column:ai_features.feature_type","label":"has-column","meta":{}}},{"data":{"id":"table:ai_features--tree--column:ai_features.result--has-column","source":"table:ai_features","target":"column:ai_features.result","label":"has-column","meta":{}}},{"data":{"id":"table:ai_features--tree--column:ai_features.created_at--has-column","source":"table:ai_features","target":"column:ai_features.created_at","label":"has-column","meta":{}}},{"data":{"id":"table:subscriptions--tree--column:subscriptions.subscription_id--has-column","source":"table:subscriptions","target":"column:subscriptions.subscription_id","label":"has-column","meta":{}}},{"data":{"id":"table:subscriptions--tree--column:subscriptions.clinic_id--has-column","source":"table:subscriptions","target":"column:subscriptions.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:subscriptions--tree--column:subscriptions.plan--has-column","source":"table:subscriptions","target":"column:subscriptions.plan","label":"has-column","meta":{}}},{"data":{"id":"table:subscriptions--tree--column:subscriptions.start_date--has-column","source":"table:subscriptions","target":"column:subscriptions.start_date","label":"has-column","meta":{}}},{"data":{"id":"table:subscriptions--tree--column:subscriptions.end_date--has-column","source":"table:subscriptions","target":"column:subscriptions.end_date","label":"has-column","meta":{}}},{"data":{"id":"table:subscriptions--tree--column:subscriptions.status--has-column","source":"table:subscriptions","target":"column:subscriptions.status","label":"has-column","meta":{}}},{"data":{"id":"table:pharmacy_integration--tree--column:pharmacy_integration.integration_id--has-column","source":"table:pharmacy_integration","target":"column:pharmacy_integration.integration_id","label":"has-column","meta":{}}},{"data":{"id":"table:pharmacy_integration--tree--column:pharmacy_integration.clinic_id--has-column","source":"table:pharmacy_integration","target":"column:pharmacy_integration.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:pharmacy_integration--tree--column:pharmacy_integration.pharmacy_name--has-column","source":"table:pharmacy_integration","target":"column:pharmacy_integration.pharmacy_name","label":"has-column","meta":{}}},{"data":{"id":"table:pharmacy_integration--tree--column:pharmacy_integration.api_key--has-column","source":"table:pharmacy_integration","target":"column:pharmacy_integration.api_key","label":"has-column","meta":{}}},{"data":{"id":"table:pharmacy_integration--tree--column:pharmacy_integration.status--has-column","source":"table:pharmacy_integration","target":"column:pharmacy_integration.status","label":"has-column","meta":{}}},{"data":{"id":"table:lab_integration--tree--column:lab_integration.integration_id--has-column","source":"table:lab_integration","target":"column:lab_integration.integration_id","label":"has-column","meta":{}}},{"data":{"id":"table:lab_integration--tree--column:lab_integration.clinic_id--has-column","source":"table:lab_integration","target":"column:lab_integration.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:lab_integration--tree--column:lab_integration.lab_name--has-column","source":"table:lab_integration","target":"column:lab_integration.lab_name","label":"has-column","meta":{}}},{"data":{"id":"table:lab_integration--tree--column:lab_integration.api_key--has-column","source":"table:lab_integration","target":"column:lab_integration.api_key","label":"has-column","meta":{}}},{"data":{"id":"table:lab_integration--tree--column:lab_integration.status--has-column","source":"table:lab_integration","target":"column:lab_integration.status","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.ad_id--has-column","source":"table:ads","target":"column:ads.ad_id","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.clinic_id--has-column","source":"table:ads","target":"column:ads.clinic_id","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.sponsor--has-column","source":"table:ads","target":"column:ads.sponsor","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.banner_url--has-column","source":"table:ads","target":"column:ads.banner_url","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.start_date--has-column","source":"table:ads","target":"column:ads.start_date","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.end_date--has-column","source":"table:ads","target":"column:ads.end_date","label":"has-column","meta":{}}},{"data":{"id":"table:ads--tree--column:ads.status--has-column","source":"table:ads","target":"column:ads.status","label":"has-column","meta":{}}}];

    function applyStyles() {
      return [
        { selector: 'node', style: { 'label': 'data(label)', 'text-valign': 'center', 'text-halign': 'center', 'font-size': 13, 'text-wrap': 'wrap', 'text-max-width': 260 } },
        { selector: 'node[type="module"]', style: { 'shape': 'roundrectangle', 'background-color': '#0b6b3a', 'color': '#fff', 'text-outline-width': 0, 'padding': '12px', 'text-wrap': 'wrap', 'text-max-width': 260, 'width': 'label', 'height': 'label' } },
        { selector: 'node[type="file"]', style: { 'shape': 'roundrectangle', 'background-color': '#ffffff', 'border-width': 1, 'border-color': '#dfeee0', 'color': '#062916', 'padding': '6px', 'text-wrap': 'wrap', 'text-max-width': 180 } },
        { selector: 'node[type="summary"]', style: { 'shape': 'roundrectangle', 'background-color': '#fff7e6', 'border-style': 'dashed', 'border-color': '#f0c86a', 'color': '#5a3b00', 'padding': '8px', 'text-wrap': 'wrap', 'text-max-width': 160 } },
        { selector: 'edge', style: { 'curve-style': 'bezier', 'target-arrow-shape': 'none', 'line-color': '#cfe9d0', 'width': 2 } },
        { selector: '.highlight', style: { 'overlay-color': '#ffd97a', 'overlay-opacity': 0.4 } }
      ];
    }

    const cy = cytoscape({
      container: document.getElementById('cy'),
      elements: elements,
      style: applyStyles(),
      layout: { name: 'breadthfirst', fit: true, padding: 30 },
      wheelSensitivity: 0.15,
      minZoom: 0.2,
      maxZoom: 4
    });

    // helper to populate detail panel with full key/values
    function renderDetail(data) {
      document.getElementById('detail-title').textContent = data.title || data.label || data.id || '';
      document.getElementById('detail-badge').textContent = (data.type || '').toUpperCase();

      const summary = document.getElementById('detail-summary');
      summary.innerHTML = data.summary ? '<h4>Summary</h4><div>' + escapeHtml(data.summary) + '</div>' : '';

      const desc = document.getElementById('detail-description');
      desc.innerHTML = data.description ? '<h4>Description</h4><div class="code">' + escapeHtml(data.description) + '</div>' : '';

      const kp = document.getElementById('detail-keypoints');
      kp.innerHTML = (data.key_points && data.key_points.length) ? '<h4>Key points</h4><ul>' + data.key_points.map(p => '<li>' + escapeHtml(p) + '</li>').join('') + '</ul>' : '';

      const imp = document.getElementById('detail-important');
      imp.innerHTML = (data.important_lines && data.important_lines.length) ? '<h4>Important lines</h4><div class="code">' + escapeHtml(data.important_lines.join('\n')) + '</div>' : '';

      const api = document.getElementById('detail-api');
      api.innerHTML = (data.api_endpoints && data.api_endpoints.length) ? '<h4>API endpoints</h4><div class="list">' + data.api_endpoints.map(ep => '<div style="padding:6px;background:#fff; border-radius:6px;border:1px solid #eef9ee"><strong>' + escapeHtml(ep.method) + '</strong> <code>' + escapeHtml(ep.path) + '</code><div style="font-size:12px;color:#445;padding-top:4px">' + escapeHtml(ep.note || '') + '</div></div>').join('') + '</div>' : '';

      const files = document.getElementById('detail-files');
      if (data.files_count) {
        const fEls = cy.nodes().filter(n => n.data('parentModule') === data.id);
        if (fEls.length) {
          files.innerHTML = '<h4>Files</h4><div class="list">' + fEls.map(n => '<div class="file-item" data-id="' + escapeHtml(n.data('targetId')||n.id()) + '">' + escapeHtml(n.data('fileName')||n.data('label')||n.id()) + '</div>').join('') + '</div>';
        } else if (data.__files && data.__files.length) {
          files.innerHTML = '<h4>Files</h4><div class="list">' + data.__files.map(f => '<div class="file-item" data-id="' + escapeHtml(f.origId||f.id) + '">' + escapeHtml(f.fileName||f.id) + '</div>').join('') + '</div>';
        } else {
          files.innerHTML = '<h4>Files</h4><div>' + data.files_count + ' files</div>';
        }
      } else {
        files.innerHTML = '';
      }

      const meta = document.getElementById('detail-meta');
      if (data.meta && Object.keys(data.meta).length) {
        meta.innerHTML = '<h4>Meta</h4><pre class="code">' + escapeHtml(JSON.stringify(data.meta, null, 2)) + '</pre>';
      } else {
        meta.innerHTML = '';
      }

      document.querySelectorAll('.file-item').forEach(el => {
        el.addEventListener('click', () => {
          const id = el.getAttribute('data-id');
          if (window.goToModule) window.goToModule(id);
        });
      });

      document.getElementById('detail-panel').setAttribute('aria-hidden', 'false');
    }

    // marshall data on node tap
    cy.on('tap', 'node', function(evt) {
      const node = evt.target;
      const type = node.data('type');

      if (type === 'summary') {
        const files = node.data('__files') || [];
        renderDetail({ title: node.data('label'), label: node.data('label'), type: 'summary', __files: files, files_count: files.length, id: node.id() });
        return;
      }

      const payload = Object.assign({}, node.data());
      payload.key_points = payload.key_points || [];
      payload.important_lines = payload.important_lines || [];
      payload.api_endpoints = payload.api_endpoints || [];

      renderDetail(payload);

      if (payload.targetId && payload.type !== 'summary') {
        if (window.goToModule) {
          try { window.goToModule(payload.targetId); } catch (e) { /* ignore */ }
        }
      }
    });

    // UI controls
    document.getElementById('zoom-in').addEventListener('click', () => cy.zoom({ level: Math.min(cy.zoom() * 1.2, cy.maxZoom()) }));
    document.getElementById('zoom-out').addEventListener('click', () => cy.zoom({ level: Math.max(cy.zoom() / 1.2, cy.minZoom()) }));
    document.getElementById('fit').addEventListener('click', () => cy.fit(40));

    document.getElementById('export-png').addEventListener('click', () => {
      const png = cy.png({ full: true, scale: 2 });
      const a = document.createElement('a');
      a.href = png;
      a.download = (document.title || 'graph') + '.png';
      a.click();
    });

    // layout switcher
    document.getElementById('layout').addEventListener('change', (ev) => {
      const name = ev.target.value;
      const layoutOpts = { name };
      if (name === 'breadthfirst') layoutOpts['directed'] = true;
      if (name === 'cose') layoutOpts['idealEdgeLength'] = 50;
      cy.layout(layoutOpts).run();
    });

    // search
    const searchInput = document.getElementById('search');
    let searchTimeout = null;
    searchInput.addEventListener('input', (ev) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        const q = ev.target.value.trim().toLowerCase();
        cy.nodes().removeClass('highlight');
        if (!q) { cy.nodes().style('opacity', 1); return; }
        const match = cy.nodes().filter(n => (n.data('label') || '').toLowerCase().includes(q) || (n.data('title')||'').toLowerCase().includes(q));
        cy.nodes().style('opacity', 0.12);
        match.style('opacity', 1);
        match.addClass('highlight');
        if (match.length) cy.fit(match, 40);
      }, 180);
    });

    // keyboard: +/- for zoom; f for fit; esc to close detail
    window.addEventListener('keydown', (ev) => {
      if (ev.key === '+') cy.zoom({ level: Math.min(cy.zoom() * 1.15, cy.maxZoom()) });
      if (ev.key === '-') cy.zoom({ level: Math.max(cy.zoom() / 1.15, cy.minZoom()) });
      if (ev.key === 'f') cy.fit(50);
      if (ev.key === 'Escape') document.getElementById('detail-panel').setAttribute('aria-hidden', 'true');
    });

    document.getElementById('detail-close').addEventListener('click', () => {
      document.getElementById('detail-panel').setAttribute('aria-hidden', 'true');
    });

    // toggle detail drawer with logo button
    document.getElementById('toggle-detail').addEventListener('click', () => {
      const panel = document.getElementById('detail-panel');
      const closed = panel.classList.toggle('closed');
      panel.setAttribute('aria-hidden', closed ? 'true' : 'false');
    });

    // helper escape for inner HTML (small runtime helper - mirrors server escapeHtml)
    function escapeHtml(s) {
      if (!s && s !== 0) return '';
      return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
    }

    // initial fit
    cy.ready(() => {
      setTimeout(() => cy.fit(40), 80);
    });

    // expose cy for debugging
    window._cy = cy;

    // ensure goToModule exists
    window.goToModule = window.goToModule || function(id) {
      try {
        const doc = (window.parent && window.parent !== window && window.parent.document) ? window.parent.document : document;
        const target = doc.getElementById(id) || doc.querySelector('[data-section-id="' + id + '"]');
        const root = doc.documentElement;
        const headerOffsetStr = (doc && doc.defaultView) ? (getComputedStyle(root).getPropertyValue('--header-offset') || '96') : '96';
        const HEADER_OFFSET = parseInt(headerOffsetStr, 10) || 96;
        if (target) {
          const rect = target.getBoundingClientRect();
          const scrollTop = (doc.defaultView && doc.defaultView.pageYOffset) || window.scrollY || 0;
          const absoluteY = rect.top + scrollTop;
          const y = Math.max(absoluteY - HEADER_OFFSET - 12, 0);
          const win = (doc.defaultView && doc.defaultView) || window;
          win.scrollTo({ top: y, behavior: 'smooth' });
          const prev = target.style.boxShadow;
          target.style.boxShadow = '0 0 0 6px rgba(11,107,58,0.08)';
          setTimeout(() => target.style.boxShadow = prev || '', 900);
        } else {
          try { history.replaceState && history.replaceState(null, '', '#' + encodeURIComponent(id)); } catch (e) {}
        }
      } catch (err) { console.warn('goToModule error', err); }
    };
  </script>
</body>
</html>